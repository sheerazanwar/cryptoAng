import { Component, OnInit } from '@angular/core';
import { AuthService } from '../../../services/auth.service';
import { ChatService } from '../../../services/chat.service';
import { getHighChartsData } from '../../../data/chart-fake-data';

@Component(
{
  selector: 'app-graph',
  templateUrl: './graph.component.html',
  styleUrls: ['./graph.component.css']
})

export class GraphComponent implements OnInit

{
  coin="XRP";
chartData={};
  neww;

  data=[
[ 1528131829956, 0.00008634, 0.00008626, 0.00008634, 0.00008633 ],
[ 1528131832010, 0.00008634, 0.00008626, 0.00008634, 0.00008633 ],
[ 1528131832343, 0.00008634, 0.00008626, 0.00008634, 0.00008633 ],
[ 1528131838605, 0.00008634, 0.00008626, 0.00008634, 0.00008633 ],
[ 1528131838899, 0.00008634, 0.00008626, 0.00008634, 0.0000863 ],
[ 1528131846839, 0.00008634, 0.00008626, 0.00008634, 0.0000863 ],
[ 1528131846840, 0.0000863, 0.0000863, 0.0000863, 0.0000863 ],
[ 1528131850956, 0.0000863, 0.0000863, 0.0000863, 0.0000863 ],
[ 1528131855989, 0.00008634, 0.0000863, 0.0000863, 0.00008634 ],
[ 1528132196430, 0.00008592, 0.00008585, 0.0000859, 0.00008589 ],
[ 1528132197055, 0.00008592, 0.00008585, 0.0000859, 0.00008587 ],
[ 1528132203941, 0.00008592, 0.00008585, 0.0000859, 0.00008587 ],
[ 1528132203941, 0.00008586, 0.00008586, 0.00008586, 0.00008586 ],
[ 1528132207364, 0.00008587, 0.00008586, 0.00008586, 0.00008587 ],
[ 1528132209486, 0.00008587, 0.00008585, 0.00008586, 0.00008585 ],
[ 1528132212088, 0.00008596, 0.00008584, 0.00008586, 0.00008596 ],
[ 1528132214443, 0.00008596, 0.00008584, 0.00008586, 0.00008584 ],
[ 1528132218576, 0.00008596, 0.00008584, 0.00008586, 0.00008594 ],
[ 1528132220751, 0.00008596, 0.00008582, 0.00008586, 0.00008583 ],
[ 1528132223169, 0.00008596, 0.00008582, 0.00008586, 0.00008594 ],
[ 1528132226007, 0.00008596, 0.00008582, 0.00008586, 0.00008596 ],
[ 1528132233553, 0.00008596, 0.00008582, 0.00008586, 0.00008596 ],
[ 1528132235056, 0.00008596, 0.00008582, 0.00008586, 0.00008594 ],
[ 1528132241062, 0.00008596, 0.00008582, 0.00008586, 0.00008594 ],
[ 1528132243123, 0.00008596, 0.00008582, 0.00008586, 0.00008593 ],
[ 1528132243203, 0.00008596, 0.00008582, 0.00008586, 0.00008584 ],
[ 1528132248555, 0.00008596, 0.00008582, 0.00008586, 0.00008594 ],
[ 1528132251711, 0.00008596, 0.00008582, 0.00008586, 0.00008594 ],
[ 1528132252865, 0.00008596, 0.00008582, 0.00008586, 0.00008583 ],
[ 1528132257566, 0.00008596, 0.00008582, 0.00008586, 0.00008589 ],
[ 1528132259767, 0.00008596, 0.00008582, 0.00008586, 0.00008584 ],
[ 1528132259767, 0.00008596, 0.00008582, 0.00008586, 0.00008584 ],
[ 1528132263656, 0.00008596, 0.00008582, 0.00008586, 0.00008584 ],
[ 1528132265733, 0.00008584, 0.00008584, 0.00008584, 0.00008584 ],
[ 1528132267146, 0.00008592, 0.00008584, 0.00008584, 0.00008592 ],
[ 1528132273563, 0.00008592, 0.00008584, 0.00008584, 0.00008592 ],
[ 1528132277879, 0.00008592, 0.00008584, 0.00008584, 0.00008592 ],
[ 1528132278038, 0.00008592, 0.00008584, 0.00008584, 0.00008584 ],
[ 1528132281087, 0.00008593, 0.00008584, 0.00008584, 0.00008593 ],
[ 1528132286967, 0.00008593, 0.00008584, 0.00008584, 0.00008593 ],
[ 1528132288518, 0.00008593, 0.00008584, 0.00008584, 0.00008593 ],
[ 1528132292022, 0.00008593, 0.00008584, 0.00008584, 0.00008591 ],
[ 1528132292023, 0.00008593, 0.00008584, 0.00008584, 0.00008584 ],
[ 1528132296219, 0.00008593, 0.00008584, 0.00008584, 0.00008593 ],
[ 1528132298403, 0.00008593, 0.00008584, 0.00008584, 0.00008593 ],
[ 1528132301962, 0.00008594, 0.00008584, 0.00008584, 0.00008593 ],
[ 1528132304617, 0.00008594, 0.00008584, 0.00008584, 0.00008593 ],
[ 1528132304617, 0.00008594, 0.00008584, 0.00008584, 0.00008593 ],
[ 1528132309593, 0.00008594, 0.00008584, 0.00008584, 0.00008594 ],
[ 1528132311854, 0.00008594, 0.00008584, 0.00008584, 0.00008593 ],
[ 1528132313935, 0.00008594, 0.00008584, 0.00008584, 0.00008593 ]


];



  constructor(private authService:AuthService, private chatService: ChatService) {}

  candlestick(crypto)
  {
    this.coin=crypto;
    this.chatService.candlestick(this.coin);
  }

  ngOnInit()
  {
    var totalData = [];
    this.chatService.getcandlestick().subscribe(data =>
    {
      // console.log(data);
      // this.neww=data;
      // console.log("chartData=> ",this.chartData);
      // data.forEach(function(x){
      //   console.log("pushed :",data);
      // this.chartData.series[0].data.push(x);
      //
      // })
//      this.totalData.push(data);
      this.chartData={
              rangeSelector: {
                  selected: 1
              },

              title: {
                  text: this.coin
              },

              series: [{
                  type: 'candlestick',
                  name: 'XRP Coin',
                  data: data,
                  dataGrouping: {
                      units: [
                          [
                              'week',
                              [4]
                          ], [
                              'month',
                              [1,2,3,4,5,6,7,8,9,10,11,12]
                          ]
                      ]
                  }
              }]
          };
    });

    setTimeout(() =>
    {
      this.candlestick(this.coin);
    }, 500);
  }
}
